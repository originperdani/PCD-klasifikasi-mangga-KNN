<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Klasifikasi Kematangan Mangga dengan KNN</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body>
    <header>
      <h1>Klasifikasi Kematangan Mangga dengan KNN</h1>
      <p>Kelompok 1 - Pengolahan Citra Digital</p>
    </header>

    <section>
      <h2>Penjelasan Singkat Metode KNN untuk Segmentasi Citra</h2>
      <p>
        Algoritma K-Nearest Neighbors (KNN) digunakan untuk mengklasifikasikan
        piksel gambar berdasarkan kemiripan warna pada ruang RGB. Setiap piksel
        diklasifikasikan ke kelas berdasarkan tetangga terdekatnya.
      </p>
    </section>

    <section>
      <h2>Upload Gambar dan Proses Segmentasi</h2>
      <a href="{{ url_for('upload') }}" class="button">Upload Gambar</a>
    </section>

    {% if original_image %}
    <section>
      <h2>Hasil Pengolahan Citra</h2>
      <div class="results">
        <div>
          <h3>Citra RGB Asli</h3>
          <img
            src="{{ url_for('static', filename='uploads/' + original_image) }}"
            alt="Citra Asli"
          />
        </div>
        <div>
          <h3>Citra RGB Hasil Segmentasi</h3>
          <img
            src="{{ url_for('static', filename='results/' + segmented_image) }}"
            alt="Citra Segmentasi"
          />
        </div>
        <div>
          <h3>Mask Objek</h3>
          <img
            src="{{ url_for('static', filename='results/' + mask_image) }}"
            alt="Mask"
          />
        </div>
      </div>

      <div>
        <h3>Ekstraksi Fitur RGB</h3>
        {% if fitur_rgb %}
        <p>R mean: {{ fitur_rgb[0] | round(2) }}</p>
        <p>G mean: {{ fitur_rgb[1] | round(2) }}</p>
        <p>B mean: {{ fitur_rgb[2] | round(2) }}</p>
        {% else %}
        <p>Tidak ada fitur (segmentasi gagal).</p>
        {% endif %}
      </div>

      <div>
        <h3>Hasil Klasifikasi</h3>
        {% if predicted_label %}
        <p>Tingkat kematangan: <strong>{{ predicted_label }}</strong></p>
        {% else %}
        <p>Tidak ada hasil klasifikasi.</p>
        {% endif %}
      </div>
    </section>
    {% endif %}

    <footer>
      <p>&copy; 2025 Kelompok 1 - Pengolahan Citra Digital</p>
    </footer>
  </body>
</html>
